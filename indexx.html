\<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CareerPath Pro - AI Career Guidance & Tech Articles</title>
    <meta name="description" content="Get personalized AI-powered career guidance for students + Tech articles by Aman">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            /* Light Theme Variables */
            --bg-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --card-bg: rgba(255, 255, 255, 0.1);
            --card-border: rgba(255, 255, 255, 0.2);
            --text-primary: white;
            --text-secondary: rgba(255, 255, 255, 0.8);
            --input-bg: rgba(255, 255, 255, 0.9);
            --input-text: #333;
            --content-bg: white;
            --content-text: #333;
            --section-title: #667eea;
            --motivation-bg: linear-gradient(135deg, #667eea, #764ba2);
            --salary-bg: #f8f9fa;
            --blog-card-bg: rgba(255, 255, 255, 0.08);
            --blog-card-hover: rgba(255, 255, 255, 0.12);
            --dropdown-bg: white;
            --dropdown-text: #333;
            --dropdown-hover: #f8f9fa;
        }

        [data-theme="dark"] {
            /* Dark Theme Variables */
            --bg-gradient: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            --card-bg: rgba(255, 255, 255, 0.05);
            --card-border: rgba(255, 255, 255, 0.1);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.7);
            --input-bg: rgba(255, 255, 255, 0.1);
            --input-text: #ffffff;
            --content-bg: #1e1e1e;
            --content-text: #e0e0e0;
            --section-title: #8bb9fe;
            --motivation-bg: linear-gradient(135deg, #2d3748, #4a5568);
            --salary-bg: #2d3748;
            --blog-card-bg: rgba(255, 255, 255, 0.05);
            --blog-card-hover: rgba(255, 255, 255, 0.08);
            --dropdown-bg: #2d3748;
            --dropdown-text: #ffffff;
            --dropdown-hover: #4a5568;
        }

        body {
            background: var(--bg-gradient);
            min-height: 100vh;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        /* Theme Toggle */
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 50px;
            padding: 10px;
            cursor: pointer;
            backdrop-filter: blur(20px);
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            transform: scale(1.1);
        }

        .theme-icon {
            font-size: 1.5rem;
            transition: all 0.3s ease;
        }

        .glass-card {
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid var(--card-border);
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .title {
            color: var(--text-primary);
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 10px;
            transition: all 0.3s ease;
        }

        .subtitle {
            color: var(--text-secondary);
            text-align: center;
            margin-bottom: 30px;
            transition: all 0.3s ease;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            color: var(--text-primary);
            margin-bottom: 8px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .form-input, .form-select {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 10px;
            background: var(--input-bg);
            color: var(--input-text);
            font-size: 1rem;
            transition: all 0.3s ease;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
        }

        /* Custom Dropdown Styling */
        .form-select {
            background-image: url("data:image/svg+xml;charset=US-ASCII,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 4 5'><path fill='%23667eea' d='M2 0L0 2h4zm0 5L0 3h4z'/></svg>");
            background-repeat: no-repeat;
            background-position: right 15px center;
            background-size: 12px;
            padding-right: 40px;
        }

        [data-theme="dark"] .form-select {
            background-image: url("data:image/svg+xml;charset=US-ASCII,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 4 5'><path fill='%238bb9fe' d='M2 0L0 2h4zm0 5L0 3h4z'/></svg>");
        }

        /* Dropdown Options Styling - FIXED */
        .form-select option {
            background: var(--dropdown-bg);
            color: var(--dropdown-text);
            padding: 12px;
            font-size: 1rem;
        }

        .form-select:focus {
            outline: none;
            border: 2px solid var(--section-title);
            background: var(--input-bg);
        }

        .form-input::placeholder {
            color: var(--text-secondary);
        }

        .submit-btn {
            width: 100%;
            padding: 15px;
            background: #ff6b6b;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.2rem;
            cursor: pointer;
            margin-top: 10px;
            transition: all 0.3s ease;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }

        .submit-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .loading {
            text-align: center;
            color: var(--text-primary);
            display: none;
            transition: all 0.3s ease;
        }

        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid var(--text-primary);
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .results {
            display: none;
        }

        .guidance-content {
            background: var(--content-bg);
            padding: 25px;
            border-radius: 15px;
            margin-top: 20px;
            line-height: 1.7;
            color: var(--content-text);
            transition: all 0.3s ease;
        }

        .guidance-section {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--card-border);
            transition: all 0.3s ease;
        }

        .guidance-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .section-title {
            color: var(--section-title);
            font-size: 1.4rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
        }

        .skills-list, .plan-list {
            list-style: none;
            padding-left: 0;
        }

        .skills-list li, .plan-list li {
            padding: 8px 0;
            border-bottom: 1px solid var(--card-border);
            display: flex;
            align-items: flex-start;
            gap: 10px;
            transition: all 0.3s ease;
        }

        .skills-list li:last-child, .plan-list li:last-child {
            border-bottom: none;
        }

        .bullet-point {
            color: var(--section-title);
            font-weight: bold;
            min-width: 20px;
            transition: all 0.3s ease;
        }

        .salary-item {
            display: flex;
            justify-content: between;
            margin-bottom: 8px;
            padding: 8px 12px;
            background: var(--salary-bg);
            border-radius: 8px;
            border-left: 4px solid var(--section-title);
            transition: all 0.3s ease;
        }

        .salary-role {
            font-weight: 600;
            flex: 1;
        }

        .salary-amount {
            color: #28a745;
            font-weight: bold;
        }

        .motivation-box {
            background: var(--motivation-bg);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        /* Blog Section Styles */
        .blog-section {
            margin-top: 30px;
            text-align: center;
        }

        .blog-card {
            background: var(--blog-card-bg);
            padding: 25px;
            border-radius: 15px;
            border: 1px solid var(--card-border);
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .blog-title {
            color: var(--text-primary);
            font-size: 1.5rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s ease;
        }

        .blog-description {
            color: var(--text-secondary);
            margin-bottom: 20px;
            line-height: 1.6;
            transition: all 0.3s ease;
        }

        .blog-button {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: linear-gradient(135deg, #00b894, #00a085);
            color: white;
            padding: 12px 25px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .blog-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 184, 148, 0.4);
        }

        .featured-articles {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }

        .article-card {
            background: var(--blog-card-bg);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--card-border);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .article-card:hover {
            transform: translateY(-5px);
            background: var(--blog-card-hover);
        }

        .article-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .article-card h4 {
            color: var(--text-primary);
            margin-bottom: 10px;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }

        .article-card p {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }

        .read-link {
            color: #00b894;
            text-decoration: none;
            font-weight: bold;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .glass-card {
                padding: 20px;
            }
            .title {
                font-size: 2rem;
            }
            .guidance-content {
                padding: 20px;
            }
            .section-title {
                font-size: 1.2rem;
            }
            .featured-articles {
                grid-template-columns: 1fr;
            }
            .theme-toggle {
                top: 10px;
                right: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Theme Toggle Button -->
    <div class="theme-toggle" id="themeToggle">
        <span class="theme-icon" id="themeIcon">üåô</span>
    </div>

    <div class="container">
        <!-- Main Career Guide Section -->
        <div class="glass-card">
            <h1 class="title">üéì CareerPath Pro</h1>
            <p class="subtitle">AI-Powered Career Guidance + Tech Articles</p>

            <form id="careerForm">
                <div class="form-group">
                    <label class="form-label">üë§ Your Name</label>
                    <input type="text" class="form-input" id="studentName" placeholder="Enter your name" required>
                </div>

                <div class="form-group">
                    <label class="form-label">üìö Current Qualification</label>
                    <select class="form-select" id="qualification" required>
                        <option value="">Select qualification</option>
                        <option value="10th">10th Pass/Appearing</option>
                        <option value="12th">12th Pass/Appearing</option>
                        <option value="Engineering">Engineering</option>
                    </select>
                </div>

                <div class="form-group" id="branchField" style="display: none;">
                    <label class="form-label">‚öôÔ∏è Branch/Stream</label>
                    <select class="form-select" id="branch">
                        <option value="Science">Science</option>
                        <option value="Commerce">Commerce</option>
                        <option value="Arts">Arts</option>
                        <option value="CSE">Computer Science</option>
                        <option value="Mechanical">Mechanical</option>
                        <option value="Civil">Civil</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">‚ù§Ô∏è Your Interests</label>
                    <input type="text" class="form-input" id="interests" placeholder="e.g., programming, medical, business" required>
                </div>

                <button type="submit" class="submit-btn" id="submitBtn">
                    üöÄ Get Career Guidance
                </button>
            </form>

            <div class="loading" id="loadingSection">
                <div class="spinner"></div>
                <p>AI is generating your personalized guidance...</p>
            </div>
        </div>

        <!-- Your Tech Blog Section -->
        <div class="glass-card blog-section">
            <div class="blog-card">
                <h2 class="blog-title">üìö Tech Articles by Aman</h2>
                <p class="blog-description">
                    I write simple, easy-to-understand articles about technology, programming, and career guidance. 
                    Perfect for students and beginners who want to learn tech concepts in simple language!
                </p>
                
                <a href="https://techarticlesbyaman.netlify.app/" target="_blank" class="blog-button">
                    üåê Visit My Tech Blog
                </a>
            </div>

            <div class="featured-articles">
                <div class="article-card" onclick="window.open('https://techarticlesbyaman.netlify.app/', '_blank')">
                    <div class="article-icon">ü§ñ</div>
                    <h4>AI & Machine Learning</h4>
                    <p>Simple explanations of complex AI concepts for beginners</p>
                    <span class="read-link">Read Article ‚Üí</span>
                </div>
                
                <div class="article-card" onclick="window.open('https://techarticlesbyaman.netlify.app/', '_blank')">
                    <div class="article-icon">üíª</div>
                    <h4>Web Development</h4>
                    <p>Step-by-step guides to start your coding journey</p>
                    <span class="read-link">Read Article ‚Üí</span>
                </div>
                
                <div class="article-card" onclick="window.open('https://techarticlesbyaman.netlify.app/', '_blank')">
                    <div class="article-icon">üîß</div>
                    <h4>Tech Career Guidance</h4>
                    <p>Career paths and opportunities in technology field</p>
                    <span class="read-link">Read Article ‚Üí</span>
                </div>
            </div>
        </div>

        <!-- Results Section -->
        <div class="glass-card results" id="resultsSection">
            <h2 style="color: var(--text-primary); text-align: center; margin-bottom: 20px;">üéØ Your Career Guidance</h2>
            <div class="guidance-content" id="guidanceContent">
                <!-- Formatted guidance will appear here -->
            </div>
            
            <!-- Blog Recommendation based on interests -->
            <div id="blogRecommendation" style="display: none;">
                <div class="motivation-box" style="background: linear-gradient(135deg, #00b894, #00a085); margin-top: 20px;">
                    <h3>üìñ Recommended Reading</h3>
                    <p>Based on your interests, check out relevant articles on my tech blog!</p>
                    <a href="https://techarticlesbyaman.netlify.app/" target="_blank" style="color: white; text-decoration: underline; font-weight: bold;">
                        Visit Tech Articles by Aman ‚Üí
                    </a>
                </div>
            </div>
            
            <button class="submit-btn" onclick="resetForm()" style="margin-top: 20px; background: #667eea;">
                üîÑ Get Another Guidance
            </button>
        </div>
    </div>

  
      <script>
    // Theme Toggle Functionality
    const themeToggle = document.getElementById('themeToggle');
    const themeIcon = document.getElementById('themeIcon');
    const body = document.body;

    // Check for saved theme or prefer color scheme
    const savedTheme = localStorage.getItem('theme') || 'light';
    body.setAttribute('data-theme', savedTheme);
    updateThemeIcon(savedTheme);

    themeToggle.addEventListener('click', () => {
        const currentTheme = body.getAttribute('data-theme');
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        body.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);
        updateThemeIcon(newTheme);
    });

    function updateThemeIcon(theme) {
        themeIcon.textContent = theme === 'light' ? 'üåô' : '‚òÄÔ∏è';
    }

    // DOM Elements
    const form = document.getElementById('careerForm');
    const qualification = document.getElementById('qualification');
    const branchField = document.getElementById('branchField');
    const loadingSection = document.getElementById('loadingSection');
    const resultsSection = document.getElementById('resultsSection');
    const guidanceContent = document.getElementById('guidanceContent');
    const submitBtn = document.getElementById('submitBtn');
    const blogRecommendation = document.getElementById('blogRecommendation');

    // Show branch field when qualification is 12th or Engineering
    qualification.addEventListener('change', function() {
        if (this.value === '12th' || this.value === 'Engineering') {
            branchField.style.display = 'block';
        } else {
            branchField.style.display = 'none';
        }
    });

    // Form submission
    form.addEventListener('submit', async function(e) {
        e.preventDefault();
        
        // Get form data
        const formData = {
            name: document.getElementById('studentName').value,
            qualification: document.getElementById('qualification').value,
            branch: document.getElementById('branch').value || 'General',
            interests: document.getElementById('interests').value
        };

        // Show loading
        form.style.display = 'none';
        loadingSection.style.display = 'block';
        submitBtn.disabled = true;

        try {
            // Call Cohere API directly from frontend
            const guidance = await callCohereAPI(formData);
            
            // Show results
            loadingSection.style.display = 'none';
            resultsSection.style.display = 'block';
            guidanceContent.innerHTML = formatGuidance(guidance, formData.name);
            
            // Show blog recommendation based on interests
            showBlogRecommendation(formData.interests);
            
        } catch (error) {
            // If API fails, show sample guidance
            loadingSection.style.display = 'none';
            resultsSection.style.display = 'block';
            guidanceContent.innerHTML = getContextAwareGuidance(formData);
            showBlogRecommendation(formData.interests);
            console.error('API Error:', error);
        }
    });

    // Show blog recommendation based on user interests
    function showBlogRecommendation(interests) {
        const techKeywords = ['programming', 'coding', 'ai', 'artificial intelligence', 'machine learning', 
                            'web development', 'software', 'technology', 'computer', 'data science', 'cybersecurity'];
        
        const hasTechInterest = techKeywords.some(keyword => 
            interests.toLowerCase().includes(keyword)
        );
        
        if (hasTechInterest) {
            blogRecommendation.style.display = 'block';
        }
    }

    // SMART COHERE API CALL WITH CONTEXT AWARENESS
    async function callCohereAPI(formData) {
        const API_KEY = "wUwDtOGkbwnvUhsSNHQIWC3HQJDR138uMINSlf3C"; // Your API key
        
        // Detect stream-interest compatibility
        const stream = formData.branch;
        const interests = formData.interests.toLowerCase();
        
        let contextAnalysis = analyzeStreamCompatibility(stream, interests);
        
        const prompt = `
        Student Profile:
        - Name: ${formData.name}
        - Current Qualification: ${formData.qualification}
        - Stream/Branch: ${formData.branch}
        - Career Interests: ${formData.interests}

        ${contextAnalysis.contextNote}

        Provide REALISTIC and PRACTICAL career guidance considering the student's academic background.

        CRITICAL GUIDELINES:
        1. ${contextAnalysis.guideline1}
        2. ${contextAnalysis.guideline2}
        3. ${contextAnalysis.guideline3}
        4. Be honest about eligibility requirements and challenges
        5. Suggest alternative pathways if direct path is not possible
        6. Focus on Indian education system and job market

        RESPONSE STRUCTURE:

        üéØ REALITY CHECK:
        - Honest assessment of current situation
        - Compatibility between stream and interests
        - Challenges and opportunities
        - Eligibility requirements

        üìö RECOMMENDED PATHWAYS:
        - Direct path (if available with current stream)
        - Alternative pathways (if stream change needed)
        - Bridge courses or additional qualifications
        - Entrance exams required

        üõ†Ô∏è SKILLS DEVELOPMENT:
        - Essential skills to learn
        - Technical and soft skills required
        - Certifications or courses needed

        üíº CAREER OPPORTUNITIES:
        - Realistic job roles with current background
        - Salary expectations in India (‚Çπ LPA)
        - Growth prospects and future scope

        üöÄ ACTION PLAN:
        - Immediate steps (next 3-6 months)
        - Medium-term goals (1-2 years)
        - Long-term strategy
        - Important deadlines and exams

        üåü FINAL ADVICE:
        - Honest, motivational conclusion
        - Encouragement with realistic expectations

        Be compassionate but truthful. Help the student make informed decisions.
        `;

        try {
            const response = await fetch('https://api.cohere.ai/v1/chat', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${API_KEY}`
                },
                body: JSON.stringify({
                    model: "command-a-03-2025",
                    message: prompt,
                    max_tokens: 1500,
                    temperature: 0.7
                })
            });

            if (!response.ok) {
                throw new Error(`API error: ${response.status}`);
            }

            const data = await response.json();
            return data.text || "Guidance generated successfully!";

        } catch (error) {
            throw error;
        }
    }

    // SMART CONTEXT ANALYSIS FUNCTION
    function analyzeStreamCompatibility(stream, interests) {
        let contextNote = "";
        let guideline1 = "";
        let guideline2 = "";
        let guideline3 = "";

        // Commerce stream analysis
        if (stream === "Commerce") {
            if (interests.includes('doctor') || interests.includes('medical') || interests.includes('neet')) {
                contextNote = "CRITICAL: Student has Commerce background but wants to pursue Medical field. This requires Physics, Chemistry, Biology in 12th standard.";
                guideline1 = "Explain that MBBS/BDS requires Science stream with PCB subjects";
                guideline2 = "Suggest alternative healthcare careers available with Commerce background";
                guideline3 = "Provide pathway for stream change if student is determined";
            }
            else if (interests.includes('engineer') || interests.includes('engineering') || interests.includes('jee')) {
                contextNote = "CRITICAL: Student has Commerce background but wants to pursue Engineering. This requires Physics, Chemistry, Mathematics in 12th standard.";
                guideline1 = "Explain that Engineering requires Science stream with PCM subjects";
                guideline2 = "Suggest technology-related careers available with Commerce background";
                guideline3 = "Mention alternative pathways like BCA, BBA in IT Management";
            }
            else {
                contextNote = "Student has Commerce background with compatible interests. Provide excellent career guidance for Commerce field.";
                guideline1 = "Focus on excellent Commerce career opportunities";
                guideline2 = "Highlight CA, CS, CMA, BCom, BBA options";
                guideline3 = "Include emerging fields like FinTech, Business Analytics";
            }
        }

        // Science stream analysis
        else if (stream === "Science") {
            if (interests.includes('ca') || interests.includes('chartered accountant') || interests.includes('commerce')) {
                contextNote = "Student has Science background but wants to pursue Commerce fields. Science students have excellent analytical skills for Commerce.";
                guideline1 = "Highlight how Science background is advantageous for Commerce careers";
                guideline2 = "Explain direct entry options for CA, CS, CMA";
                guideline3 = "Mention unique combinations like BCom with Data Science";
            }
            else if (interests.includes('arts') || interests.includes('design') || interests.includes('law')) {
                contextNote = "Student has Science background but wants to pursue Arts/Design fields. Science students can excel in creative fields with analytical thinking.";
                guideline1 = "Show how Science background enhances creative careers";
                guideline2 = "Suggest design, architecture, law options";
                guideline3 = "Highlight interdisciplinary opportunities";
            }
            else {
                contextNote = "Student has Science background with compatible interests. Provide comprehensive Science career guidance.";
                guideline1 = "Cover Engineering, Medical, Pure Sciences options";
                guideline2 = "Include research and emerging technology fields";
                guideline3 = "Highlight competitive exam preparation strategies";
            }
        }

        // Arts stream analysis
        else if (stream === "Arts") {
            if (interests.includes('engineer') || interests.includes('doctor') || interests.includes('science')) {
                contextNote = "CRITICAL: Student has Arts background but wants to pursue Science/Engineering/Medical fields. These require Science stream subjects.";
                guideline1 = "Explain stream requirements for Science/Engineering/Medical fields";
                guideline2 = "Suggest alternative technology/healthcare careers available with Arts";
                guideline3 = "Provide pathway for stream change if absolutely determined";
            }
            else if (interests.includes('commerce') || interests.includes('ca') || interests.includes('business')) {
                contextNote = "Student has Arts background but wants to pursue Commerce fields. Arts students can successfully transition to Commerce.";
                guideline1 = "Explain direct Commerce options available for Arts students";
                guideline2 = "Highlight BCom, BBA, Business Management options";
                guideline3 = "Mention unique Arts+Commerce combinations";
            }
            else {
                contextNote = "Student has Arts background with compatible interests. Provide excellent Arts career guidance.";
                guideline1 = "Cover diverse Arts career opportunities";
                guideline2 = "Include humanities, social sciences, creative fields";
                guideline3 = "Highlight emerging digital media and content creation careers";
            }
        }

        // Engineering branch analysis
        else if (stream.includes("CSE") || stream.includes("Mechanical") || stream.includes("Civil")) {
            if (interests.includes('doctor') || interests.includes('medical')) {
                contextNote = "CRITICAL: Engineering student wants to pursue Medical field. This would require starting over with Science stream and NEET.";
                guideline1 = "Explain the significant challenges of switching to Medical after Engineering";
                guideline2 = "Suggest healthcare technology roles that combine both fields";
                guideline3 = "Provide honest assessment of time and effort required";
            }
            else if (interests.includes('ca') || interests.includes('commerce') || interests.includes('finance')) {
                contextNote = "Engineering student wants to pursue Commerce/Finance fields. Engineering background is highly valued in these fields.";
                guideline1 = "Highlight excellent Finance/Commerce opportunities for Engineers";
                guideline2 = "Suggest MBA in Finance, FinTech, Business Analytics roles";
                guideline3 = "Mention competitive advantages of Engineering + Commerce combination";
            }
            else {
                contextNote = "Engineering student with compatible technical interests. Provide advanced Engineering career guidance.";
                guideline1 = "Cover core engineering and IT career paths";
                guideline2 = "Include higher education and specialization options";
                guideline3 = "Highlight emerging technologies and research opportunities";
            }
        }

        // 10th standard analysis
        else if (stream === "General" && interests) {
            contextNote = "Student is in 10th standard planning future career. Provide stream selection guidance based on interests.";
            guideline1 = "Explain stream options after 10th: Science, Commerce, Arts";
            guideline2 = "Connect interests to appropriate stream choices";
            guideline3 = "Provide preparation tips for chosen stream";
        }

        return { contextNote, guideline1, guideline2, guideline3 };
    }

    // UPDATED FORMATTING FUNCTION FOR CONTEXT-AWARE GUIDANCE
    function formatGuidance(text, studentName) {
        console.log("Raw AI Response:", text);
        
        let html = `
            <div class="guidance-section">
                <h3 class="section-title">üëã Welcome ${studentName}!</h3>
                <p>Based on your academic background and interests, here's your personalized and realistic career assessment:</p>
            </div>
        `;

        const sections = {
            'REALITY CHECK': 'üéØ Reality Check & Assessment',
            'RECOMMENDED PATHWAYS': 'üìö Recommended Pathways', 
            'SKILLS DEVELOPMENT': 'üõ†Ô∏è Skills Development',
            'CAREER OPPORTUNITIES': 'üíº Career Opportunities',
            'ACTION PLAN': 'üöÄ Your Action Plan',
            'FINAL ADVICE': 'üåü Final Advice'
        };

        let currentSection = '';
        let content = '';

        const lines = text.split('\n');
        
        for (let line of lines) {
            line = line.trim();
            
            if (!line) continue;
            
            let isSectionHeader = false;
            for (const [key, value] of Object.entries(sections)) {
                if (line.toUpperCase().includes(key)) {
                    if (currentSection && content) {
                        html += createSection(currentSection, content.trim());
                    }
                    currentSection = value;
                    content = '';
                    isSectionHeader = true;
                    break;
                }
            }

            if (!isSectionHeader && line) {
                if (!Object.keys(sections).some(section => line.toUpperCase().includes(section))) {
                    content += line + '\n';
                }
            }
        }

        if (currentSection && content.trim()) {
            html += createSection(currentSection, content.trim());
        }

        html += `
            <div class="motivation-box">
                <h3>üí™ Make Informed Decisions!</h3>
                <p>Your career journey should be based on realistic planning and your true passions. You've got this! üöÄ</p>
            </div>
        `;

        return html;
    }

    function createSection(title, content) {
        let sectionHtml = `
            <div class="guidance-section">
                <h3 class="section-title">${title}</h3>
        `;

        if (title === 'üíº Career Opportunities') {
            const items = content.split('\n').filter(line => {
                const trimmed = line.trim();
                return trimmed && trimmed.length > 5;
            });
            
            sectionHtml += `<div class="salary-list">`;
            
            items.forEach(item => {
                const trimmed = item.trim().replace(/^[‚Ä¢\-]\s*/, '');
                
                if (trimmed) {
                    const salaryMatch = trimmed.match(/(.*?):?\s*(‚Çπ?[\d,\-‚Äì]+\s*(?:LPA|lakh|lakhs|Lakh))/i);
                    
                    if (salaryMatch) {
                        const role = salaryMatch[1].trim();
                        const salary = salaryMatch[2].trim();
                        
                        sectionHtml += `
                            <div class="salary-item">
                                <span class="salary-role">${role}</span>
                                <span class="salary-amount">${salary}</span>
                            </div>
                        `;
                    } else {
                        sectionHtml += `
                            <div class="salary-item">
                                <span class="salary-role">${trimmed}</span>
                                <span class="salary-amount">Market competitive</span>
                            </div>
                        `;
                    }
                }
            });
            
            sectionHtml += `</div>`;
            
        } else if (title === 'üöÄ Your Action Plan') {
            const items = content.split('\n').filter(line => {
                const trimmed = line.trim();
                return trimmed && trimmed.length > 5;
            });
            
            sectionHtml += `<ol class="plan-list">`;
            items.forEach((item, index) => {
                const trimmed = item.replace(/^\d+\.\s*/, '').replace(/^[‚Ä¢\-]\s*/, '').trim();
                if (trimmed) {
                    sectionHtml += `
                        <li>
                            <span class="bullet-point">${index + 1}.</span>
                            <span>${trimmed}</span>
                        </li>
                    `;
                }
            });
            sectionHtml += `</ol>`;
        } else {
            const items = content.split('\n').filter(line => {
                const trimmed = line.trim();
                return trimmed && trimmed.length > 5;
            });
            
            sectionHtml += `<ul class="skills-list">`;
            items.forEach(item => {
                const trimmed = item.replace(/^[‚Ä¢\-]\s*/, '').trim();
                if (trimmed) {
                    sectionHtml += `
                        <li>
                            <span class="bullet-point">‚Ä¢</span>
                            <span>${trimmed}</span>
                        </li>
                    `;
                }
            });
            sectionHtml += `</ul>`;
        }

        sectionHtml += `</div>`;
        return sectionHtml;
    }

    // CONTEXT-AWARE SAMPLE GUIDANCE FOR API FAILURE
    function getContextAwareGuidance(formData) {
        const stream = formData.branch;
        const interests = formData.interests.toLowerCase();
        
        // Commerce student wants Medical
        if (stream === "Commerce" && (interests.includes('doctor') || interests.includes('medical'))) {
            return `
                <div class="guidance-section">
                    <h3 class="section-title">üéØ Reality Check & Assessment</h3>
                    <p>With your Commerce background, pursuing Medical field (MBBS/BDS) directly is not possible as it requires Science stream with Physics, Chemistry, Biology.</p>
                </div>

                <div class="guidance-section">
                    <h3 class="section-title">üìö Recommended Pathways</h3>
                    <ul class="skills-list">
                        <li><span class="bullet-point">‚Ä¢</span><span><strong>Alternative Healthcare Careers:</strong> Hospital Management, Healthcare Administration, Medical Tourism</span></li>
                        <li><span class="bullet-point">‚Ä¢</span><span><strong>Stream Change Option:</strong> You'd need to complete 11th-12th Science with PCB</span></li>
                        <li><span class="bullet-point">‚Ä¢</span><span><strong>Paramedical Courses:</strong> BSc Nursing, Pharmacy, Physiotherapy (require Science background)</span></li>
                    </ul>
                </div>

                <div class="guidance-section">
                    <h3 class="section-title">üíº Career Opportunities</h3>
                    <div class="salary-list">
                        <div class="salary-item">
                            <span class="salary-role">Hospital Administrator</span>
                            <span class="salary-amount">‚Çπ6-15 LPA</span>
                        </div>
                        <div class="salary-item">
                            <span class="salary-role">Healthcare Manager</span>
                            <span class="salary-amount">‚Çπ8-20 LPA</span>
                        </div>
                        <div class="salary-item">
                            <span class="salary-role">Medical Billing Executive</span>
                            <span class="salary-amount">‚Çπ3-6 LPA</span>
                        </div>
                    </div>
                </div>

                <div class="guidance-section">
                    <h3 class="section-title">üöÄ Your Action Plan</h3>
                    <ol class="plan-list">
                        <li><span class="bullet-point">1.</span><span>Research healthcare management courses (BBA in Hospital Management)</span></li>
                        <li><span class="bullet-point">2.</span><span>Consider stream change only if absolutely determined for MBBS</span></li>
                        <li><span class="bullet-point">3.</span><span>Explore paramedical options that accept Commerce students</span></li>
                        <li><span class="bullet-point">4.</span><span>Build skills in healthcare administration and management</span></li>
                    </ol>
                </div>

                <div class="motivation-box">
                    <h3>üåü Final Advice</h3>
                    <p>While direct Medical path isn't available, your Commerce skills are valuable in healthcare administration. Consider combining your strengths with healthcare knowledge!</p>
                </div>
            `;
        }

        // Default sample guidance for other cases
        return getSampleGuidance(formData);
    }

    // Keep the original sample guidance as fallback
    function getSampleGuidance(formData) {
        return `
            <div class="guidance-section">
                <h3 class="section-title">üëã Welcome ${formData.name}!</h3>
                <p>First of all, don't worry at all. You're on the right path by seeking guidance!</p>
            </div>

            <div class="guidance-section">
                <h3 class="section-title">üõ†Ô∏è Essential Skills to Master</h3>
                <ul class="skills-list">
                    <li><span class="bullet-point">‚Ä¢</span><span>Core fundamentals in ${formData.interests}</span></li>
                    <li><span class="bullet-point">‚Ä¢</span><span>Practical project experience</span></li>
                    <li><span class="bullet-point">‚Ä¢</span><span>Communication and presentation skills</span></li>
                    <li><span class="bullet-point">‚Ä¢</span><span>Industry-specific tools and technologies</span></li>
                </ul>
            </div>

            <div class="guidance-section">
                <h3 class="section-title">üíº Career Opportunities & Salaries</h3>
                <div class="salary-list">
                    <div class="salary-item">
                        <span class="salary-role">Entry Level Position</span>
                        <span class="salary-amount">‚Çπ3-6 LPA</span>
                    </div>
                    <div class="salary-item">
                        <span class="salary-role">Experienced Professional</span>
                        <span class="salary-amount">‚Çπ8-15 LPA</span>
                    </div>
                    <div class="salary-item">
                        <span class="salary-role">Senior Role</span>
                        <span class="salary-amount">‚Çπ15-25 LPA</span>
                    </div>
                </div>
            </div>

            <div class="guidance-section">
                <h3 class="section-title">üöÄ Your Step-by-Step Action Plan</h3>
                <ol class="plan-list">
                    <li><span class="bullet-point">1.</span><span>Research your field thoroughly</span></li>
                    <li><span class="bullet-point">2.</span><span>Build practical skills through online courses</span></li>
                    <li><span class="bullet-point">3.</span><span>Create portfolio projects</span></li>
                    <li><span class="bullet-point">4.</span><span>Network with professionals</span></li>
                    <li><span class="bullet-point">5.</span><span>Apply for internships and jobs</span></li>
                </ol>
            </div>

            <div class="motivation-box">
                <h3>üéØ You've Got This!</h3>
                <p>Remember, consistency beats talent. Keep learning daily and your dedication will take you far! üöÄ</p>
            </div>
        `;
    }

    function resetForm() {
        form.reset();
        branchField.style.display = 'none';
        resultsSection.style.display = 'none';
        blogRecommendation.style.display = 'none';
        form.style.display = 'block';
        submitBtn.disabled = false;
    }

    </script>
</body>
</html>